<!DOCTYPE html>
<html>
<head>
<title>TimeZone Planner</title>
<style type="text/css">
body{font-family:Verdana;font-size:12px;cursor:default;}
.pageHead{font-size:22px;font-weight:bold;}
.tzPlanner{border:1px solid #000;border-spacing:0px;border-collapse:collapse;}
.tzPlanner td{border:1px solid #000;padding-left:20px;padding-right:20px;}
.tzPlanner td.colHead{background-color:#00a2e8;color:#fff;}
.tzPlanner .tzLabel{font-size:10px;}
a{color:#00a2e8};
</style>
</head>
<body>
<div id="container" style="text-align:center;"></div>
<script type="text/javascript">
document.oncontextmenu=function(e){return false;};
window.kCommon={};
kCommon.baseDate=new Date();
kCommon.baseDate.setHours(0);
kCommon.baseDate.setMinutes(0);
kCommon.baseDate.setSeconds(0);
kCommon.baseTime=kCommon.baseDate.getTime(); /*GMT*/
kCommon.second=1000;
kCommon.minute=60*kCommon.second;
kCommon.hour=60*kCommon.minute;
kCommon.formatNum=function(num){
	return (num<10)?"0"+num:num;
};
kCommon.displayTime=function(dObj){
	return kCommon.formatNum(dObj.getHours())+":"+kCommon.formatNum(dObj.getMinutes());
};
kCommon.highlightTimeRow=function(trObj){
	trObj.style.backgroundColor="#93deff";
};
kCommon.unHighlightTimeRow=function(trObj){
	trObj.style.backgroundColor="#fff";
};
kCommon.getSecondSundayInMarch=function(){
	var ctr=0;
	for(var i=1;i<=31;i++){
		var dt=new Date();
		dt.setMonth(2);
		dt.setDate(i);
		if(dt.getDay()===0){
			ctr++;
		}
		if(ctr==2){
			return dt.getDate();
		}
	}
};
kCommon.getFirstSundayInNovember=function(){
	var ctr=0;
	for(var i=1;i<=30;i++){
		var dt=new Date();
		dt.setMonth(10);
		dt.setDate(i);
		if(dt.getDay()===0){
			ctr++;
		}
		if(ctr==1){
			return dt.getDate();
		}
	}
};
kCommon.isUSDayLightSavingTime=function(){
/* -- Daylight saving time starts on the second Sunday in March and ends on the first Sunday in November -- */
	var dstTime=false;
	var currentDate=new Date();
	var currentMonth=currentDate.getMonth();
	var currentDay=currentDate.getDay();
	if(currentMonth>10 && currentMonth<2){
		dstTime=false;
	}else if(currentMonth>2 && currentMonth<10){
		dstTime=true;
	}else if(currentMonth==10 || currentMonth==2){
		if(currentMonth==2){
			var secondSundayInMarch=kCommon.getSecondSundayInMarch();
			if((new Date()).getDate()<secondSundayInMarch){
				dstTime=false;
			}else{
				dstTime=true;
			}
		}else if(currentMonth==10){
			var firstSundayInNovember=kCommon.getFirstSundayInNovember();
			if((new Date()).getDate()>=firstSundayInNovember){
				dstTime=false;
			}else{
				dstTime=true;
			}
		}
	}
	return dstTime;
};
kCommon.dstApplicable=kCommon.isUSDayLightSavingTime();
kCommon.adjustDSTDisplay=function(){
	var cssStr="";
	if(kCommon.dstApplicable){
		cssStr=".tzPlanner td.standard{color:#aeaeae;} .tzPlanner td.daylight{color:#000;}";
	}else{
		cssStr=".tzPlanner td.standard{color:#000;} .tzPlanner td.daylight{color:#aeaeae;}";
	}
	var cssStyle=document.createElement("style");
	cssStyle.type="text/css";
	if(cssStyle.styleSheet){
		cssStyle.styleSheet.cssText=cssStr;
	}else{
		cssStyle.appendChild(document.createTextNode(cssStr));
	}
	document.getElementsByTagName("head")[0].appendChild(cssStyle);
};
kCommon.adjustDSTDisplay();
window.KTimeZone={
	ist:{label:"IST",time:kCommon.baseTime-0,timezonetype:"standard-nondaylight"},
	est:{label:"EST",time:kCommon.baseTime-((10*kCommon.hour)+(30*kCommon.minute)),timezonetype:"standard"},
	edt:{label:"EDT",time:kCommon.baseTime-((9*kCommon.hour)+(30*kCommon.minute)),timezonetype:"daylight"},
	cst:{label:"CST",time:kCommon.baseTime-((11*kCommon.hour)+(30*kCommon.minute)),timezonetype:"standard"},
	cdt:{label:"CDT",time:kCommon.baseTime-((10*kCommon.hour)+(30*kCommon.minute)),timezonetype:"daylight"},
	pst:{label:"PST",time:kCommon.baseTime-((13*kCommon.hour)+(30*kCommon.minute)),timezonetype:"standard"},
	pdt:{label:"PDT",time:kCommon.baseTime-((12*kCommon.hour)+(30*kCommon.minute)),timezonetype:"daylight"}
};
var markup="<span class=\"pageHead\">TimeZone Planner</span><br/><span>powered by <a href=\"http://www.ashishkumarkc.com\" target=\"_blank\">Ashish's Web</a></span><br/><br/>";
markup+="<table class=\"tzPlanner\" align=\"center\">";
markup+="<tr>";
for(var obj in KTimeZone){
	markup+="<td class=\"colHead\">"+KTimeZone[obj].label+"</td>";
}
markup+="</tr>";
for(var i=0;i<96;i++){
	markup+="<tr onmouseover=\"kCommon.highlightTimeRow(this);\" onmouseout=\"kCommon.unHighlightTimeRow(this);\">";
	for(var key in KTimeZone){
		markup+="<td class=\""+KTimeZone[key].timezonetype+"\">"+kCommon.displayTime(new Date(KTimeZone[key].time+(i*15*kCommon.minute)))+"<span class=\"tzLabel\"> ("+KTimeZone[key].label+")</span></td>";
	}
	markup+="</tr>";
}
markup+="</table>";
document.getElementById("container").innerHTML=markup;
</script>
</body>
</html>
